---
- name: Check for instance_name variable
  fail:
    msg: "The name to assign to the new DCenter instance is missing."
  when: not (instance_name is defined and instance_name != "")

- name: Check for DCenter command
  stat:
    path: "/opt/dcenter/bin/dc"
  register: dc

- name: Fail if DCenter command does not exit
  fail:
    msg: "The dc command does not exist at '/opt/dcenter/bin/dc'."
  when: not (dc.stat.isreg is defined and dc.stat.isreg)

- name: Destroy DCenter instance
  shell: "{{ dc.stat.path }} unregister {{ instance_name }}"
